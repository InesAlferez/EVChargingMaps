{"version":3,"sources":["folder.page.ts"],"names":[],"mappings":"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","file":"folder.page.js","sourcesContent":["import { GmapsService } from './../services/gmaps.service';\nimport { Component, ElementRef, OnDestroy, OnInit, Renderer2, ViewChild } from '@angular/core';\nimport { ActionSheetController } from '@ionic/angular';\n\n@Component({\n  selector: 'app-folder',\n  templateUrl: './folder.page.html',\n  styleUrls: ['./folder.page.scss'],\n})\nexport class FolderPage implements OnInit, OnDestroy {\n\n// this gets the map element from the DOM\n@ViewChild('map', { static: true })\nmapElementRef!: ElementRef;\n// this is the google maps object\ngoogleMaps: any;\n// this is the center of the map\ncenter = { lat: 35.1850678, lng: -84.8877585 };\n// this is the map object\nmap: any;\n// this is the map click listener\nmapClickListener: any;\n// this is the marker click listener\nmarkerClickListener: any;\n// this is the array of markers\nmarkers: any[] = [];\n\n\nconstructor(\n  private gmaps: GmapsService,\n  private renderer: Renderer2,\n  private actionSheetCtrl: ActionSheetController\n) {}\n\nngOnInit(): void {\n}\n\n// this is the function that gets called when the map is ready\nngAfterViewInit() {\n  this.loadMap();\n}\n\n// this is the function that loads the map\nasync loadMap() {\n  try {\n    let googleMaps: any = await this.gmaps.loadingGoogleMaps();\n    this.googleMaps = googleMaps;\n    const mapEl = this.mapElementRef.nativeElement;\n    const location = new googleMaps.LatLng(this.center.lat, this.center.lng);\n    this.map = new googleMaps.Map(mapEl, {\n      center: location,\n      zoom: 12,\n    });\n    this.renderer.addClass(mapEl, 'visible');\n    this.addMarker(location);\n    this.onMapClick();\n  } catch(e) {\n    console.log(e);\n  }\n}\n\nonMapClick() {\n  this.mapClickListener = this.googleMaps.event.addListener(this.map, \"click\", (mapsMouseEvent: { latLng: { toJSON: () => any; }; }) => {\n    console.log(mapsMouseEvent.latLng.toJSON());\n    this.addMarker(mapsMouseEvent.latLng);\n  });\n}\n// this is the function that adds a marker to the map\naddMarker(location: any) {\n  let googleMaps: any = this.googleMaps;\n  const icon = {\n    url: 'assets/icons/location-pin.png',\n    scaledSize: new googleMaps.Size(50, 50), \n  };\n  const marker = new googleMaps.Marker({\n    position: location,\n    map: this.map,\n    icon: icon,\n    // draggable: true,\n    animation: googleMaps.Animation.DROP\n  });\n  this.markers.push(marker);\n  // this.presentActionSheet();\n  this.markerClickListener = this.googleMaps.event.addListener(marker, 'click', () => {\n    console.log('markerclick', marker);\n    this.checkAndRemoveMarker(marker);\n    console.log('markers: ', this.markers);\n  });\n}\n// this is the function that removes a marker from the map\ncheckAndRemoveMarker(marker: { position: { lat: () => any; lng: () => any; }; }) {\n  const index = this.markers.findIndex(x => x.position.lat() == marker.position.lat() && x.position.lng() == marker.position.lng());\n  console.log('is marker already: ', index);\n  if(index >= 0) {\n    this.markers[index].setMap(null);\n    this.markers.splice(index, 1);\n    return;\n  }\n}\n// this is the function that presents the action sheet\nasync presentActionSheet() {\n  const actionSheet = await this.actionSheetCtrl.create({\n    header: 'Added Marker',\n    subHeader: '',\n    buttons: [\n      {\n        text: 'Remove',\n        role: 'destructive',\n        data: {\n          action: 'delete',\n        },\n      },\n      {\n        text: 'Save',\n        data: {\n          action: 'share',\n        },\n      },\n      {\n        text: 'Cancel',\n        role: 'cancel',\n        data: {\n          action: 'cancel',\n        },\n      },\n    ],\n  });\n\n  await actionSheet.present();\n}\n\n// this is the function that gets called when the page is destroyed\nngOnDestroy() {\n  this.googleMaps.event.removeAllListeners();\n  if(this.mapClickListener) this.googleMaps.event.removeListener(this.mapClickListener);\n  if(this.markerClickListener) this.googleMaps.event.removeListener(this.markerClickListener);\n}\n}"]}